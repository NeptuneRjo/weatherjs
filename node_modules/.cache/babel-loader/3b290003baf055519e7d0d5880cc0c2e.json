{"ast":null,"code":"import _asyncToGenerator from\"/home/neptunerjo/personal-projects/weather-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/neptunerjo/personal-projects/weather-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/neptunerjo/personal-projects/weather-app/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect,useState}from'react';import Body from'./components/Body/Body';import Header from'./components/Header/Header';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState('Tampa'),_useState2=_slicedToArray(_useState,2),location=_useState2[0],setLocation=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),isPending=_useState6[0],setIsPending=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var handleFetch=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,abortCont;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url=\"http://api.openweathermap.org/data/2.5/weather?q=\".concat(location,\"&APPID=\").concat(process.env.REACT_APP_PUBLIC_KEY);abortCont=new AbortController();fetch(url,{signal:abortCont.signal}).then(function(res){if(!res.ok){throw Error('could not fetch the data for that resource');}return res.json();}).then(function(data){setData(data);setIsPending(false);setError(null);}).catch(function(err){if(err.name==='AbortError'){console.log('fetch aborted');}else{setError(err.message);setIsPending(false);}});return _context.abrupt(\"return\",function(){return abortCont.abort();});case 4:case\"end\":return _context.stop();}}},_callee);}));return function handleFetch(){return _ref.apply(this,arguments);};}();var handleLocation=function handleLocation(userLocation){var newLocation=userLocation;setLocation(newLocation);};useEffect(function(){handleFetch(location);},[location]);return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(Header,{handleLocation:handleLocation}),isPending&&/*#__PURE__*/_jsx(\"div\",{className:\"body-loading\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})}),/*#__PURE__*/_jsx(Body,{data:data})]});};export default App;","map":{"version":3,"sources":["/home/neptunerjo/personal-projects/weather-app/src/App.js"],"names":["React","useEffect","useState","Body","Header","App","location","setLocation","data","setData","isPending","setIsPending","error","setError","handleFetch","url","process","env","REACT_APP_PUBLIC_KEY","abortCont","AbortController","fetch","signal","then","res","ok","Error","json","catch","err","name","console","log","message","abort","handleLocation","userLocation","newLocation"],"mappings":"+YAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,CACA,MAAOC,CAAAA,MAAP,KAAmB,4BAAnB,C,wFAGA,GAAMC,CAAAA,GAAG,CAAG,QAANA,CAAAA,GAAM,EAAM,CAEhB,cAAgCH,QAAQ,CAAC,OAAD,CAAxC,wCAAOI,QAAP,eAAiBC,WAAjB,eAEA,eAAwBL,QAAQ,CAAC,IAAD,CAAhC,yCAAOM,IAAP,eAAaC,OAAb,eACA,eAAkCP,QAAQ,CAAC,IAAD,CAA1C,yCAAOQ,SAAP,eAAkBC,YAAlB,eACA,eAA0BT,QAAQ,CAAC,IAAD,CAAlC,yCAAOU,KAAP,eAAcC,QAAd,eAGA,GAAMC,CAAAA,WAAW,0FAAG,qJACZC,GADY,4DAC8CT,QAD9C,mBACgEU,OAAO,CAACC,GAAR,CAAYC,oBAD5E,EAEZC,SAFY,CAEA,GAAIC,CAAAA,eAAJ,EAFA,CAIlBC,KAAK,CAACN,GAAD,CAAM,CAAEO,MAAM,CAAEH,SAAS,CAACG,MAApB,CAAN,CAAL,CACGC,IADH,CACQ,SAAAC,GAAG,CAAI,CACX,GAAI,CAACA,GAAG,CAACC,EAAT,CAAa,CACX,KAAMC,CAAAA,KAAK,CAAC,4CAAD,CAAX,CACD,CACD,MAAOF,CAAAA,GAAG,CAACG,IAAJ,EAAP,CACD,CANH,EAOGJ,IAPH,CAOQ,SAAAf,IAAI,CAAI,CACZC,OAAO,CAACD,IAAD,CAAP,CACAG,YAAY,CAAC,KAAD,CAAZ,CACAE,QAAQ,CAAC,IAAD,CAAR,CACD,CAXH,EAYGe,KAZH,CAYS,SAAAC,GAAG,CAAI,CACZ,GAAIA,GAAG,CAACC,IAAJ,GAAa,YAAjB,CAA+B,CAC7BC,OAAO,CAACC,GAAR,CAAY,eAAZ,EACD,CAFD,IAEO,CACLnB,QAAQ,CAACgB,GAAG,CAACI,OAAL,CAAR,CACAtB,YAAY,CAAC,KAAD,CAAZ,CACD,CAEF,CApBH,EAJkB,gCA0BT,iBAAMQ,CAAAA,SAAS,CAACe,KAAV,EAAN,EA1BS,wDAAH,kBAAXpB,CAAAA,WAAW,0CAAjB,CA6BA,GAAMqB,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,YAAD,CAAkB,CACvC,GAAMC,CAAAA,WAAW,CAAGD,YAApB,CAEA7B,WAAW,CAAC8B,WAAD,CAAX,CACD,CAJD,CAMApC,SAAS,CAAC,UAAM,CACda,WAAW,CAACR,QAAD,CAAX,CACD,CAFQ,CAEN,CAACA,QAAD,CAFM,CAAT,CAKA,mBACE,aAAK,SAAS,CAAC,KAAf,wBACI,KAAC,MAAD,EAAQ,cAAc,CAAE6B,cAAxB,EADJ,CAEKzB,SAAS,eACR,YAAK,SAAS,CAAC,cAAf,uBACE,iCADF,EAHN,cAOI,KAAC,IAAD,EAAM,IAAI,CAAEF,IAAZ,EAPJ,GADF,CAWD,CA5DD,CA8DA,cAAeH,CAAAA,GAAf","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport Body from './components/Body/Body';\nimport Header from './components/Header/Header';\n\n\nconst App = () => {\n\n  const [location, setLocation] = useState('Tampa');\n\n  const [data, setData] = useState(null);\n  const [isPending, setIsPending] = useState(true);\n  const [error, setError] = useState(null)\n\n\n  const handleFetch = async () => {\n    const url = `http://api.openweathermap.org/data/2.5/weather?q=${location}&APPID=${process.env.REACT_APP_PUBLIC_KEY}`\n    const abortCont = new AbortController();\n\n    fetch(url, { signal: abortCont.signal })\n      .then(res => {\n        if (!res.ok) {\n          throw Error('could not fetch the data for that resource');\n        }\n        return res.json();\n      })\n      .then(data => {\n        setData(data);\n        setIsPending(false);\n        setError(null);\n      })\n      .catch(err => {\n        if (err.name === 'AbortError') {\n          console.log('fetch aborted')\n        } else {\n          setError(err.message);\n          setIsPending(false);\n        }\n\n      });\n\n      return () => abortCont.abort();\n  }\n\n  const handleLocation = (userLocation) => {\n    const newLocation = userLocation;\n\n    setLocation(newLocation);\n  }\n\n  useEffect(() => {\n    handleFetch(location)\n  }, [location])\n\n\n  return (\n    <div className=\"app\">\n        <Header handleLocation={handleLocation}/>\n        {isPending &&\n          <div className=\"body-loading\">\n            <p>Loading...</p>\n          </div>\n        }\n        <Body data={data} />\n    </div>\n  )\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}